APP_BIND_ADDR=:8080
APP_SHUTDOWN_TIMEOUT=15s
APP_SESSION_INACTIVITY_TIMEOUT=2m
# Keep ended sessions for debugging/history before janitor pruning (0 disables pruning).
APP_SESSION_RETENTION=24h
APP_FIRST_AUDIO_SLO=700ms
APP_METRICS_NAMESPACE=samantha
# Enable task runtime: voice/REST requests become durable tasks executed via OpenClaw.
APP_TASK_RUNTIME_ENABLED=false
# Execution timeout per task.
APP_TASK_TIMEOUT=20m
# Idempotency window to dedupe repeated intents.
APP_TASK_IDEMPOTENCY_WINDOW=10s

# Danger: allow cross-origin websocket connections (default false).
# Only enable if you know what you're doing (e.g. running behind a proxy with different hostnames).
APP_ALLOW_ANY_ORIGIN=false
# When true, avoid dropping critical outbound events under backpressure.
APP_STRICT_OUTBOUND=false
# Try AudioWorklet mic capture in the browser UI (falls back to ScriptProcessor if unavailable).
APP_UI_AUDIO_WORKLET=true
# Delay before backend emits `assistant_working` system event (0 disables it).
APP_ASSISTANT_WORKING_DELAY=500ms
# Silence breaker while waiting on assistant response: off|visual|speech.
APP_UI_SILENCE_BREAKER_MODE=visual
# Delay after `assistant_working` before showing/playing silence breaker.
APP_UI_SILENCE_BREAKER_DELAY=750ms
# Minimum utterance length before auto-commit is allowed.
APP_UI_VAD_MIN_UTTERANCE=650ms
# Extra silence grace added before auto-commit fires.
APP_UI_VAD_GRACE=220ms
# Client-side VAD profile: default|patient|snappy.
# - default: balanced turn-taking
# - patient: waits longer (prevents mid-sentence cutoffs)
# - snappy: responds fastest
APP_UI_VAD_PROFILE=default
# Audio crossfade overlap between streaming playback segments.
APP_UI_AUDIO_SEGMENT_OVERLAP=22ms
# Waiting fillers: off|adaptive|occasional|always (default: off).
APP_FILLER_MODE=off
# Minimum delay after commit before spoken filler is eligible.
APP_FILLER_MIN_DELAY=1200ms
# Cooldown between spoken fillers across turns.
APP_FILLER_COOLDOWN=18s
# Maximum spoken fillers emitted per turn.
APP_FILLER_MAX_PER_TURN=1
# Keep Task Desk hidden in core UI by default (available via ?debug=1&taskdesk=1).
APP_UI_TASK_DESK_DEFAULT=false
# Outbound backpressure policy: drop|block.
APP_WS_BACKPRESSURE_MODE=drop

# Voice backend: local|auto|elevenlabs|mock
# Default local keeps Samantha fully OSS/offline-first.
# If you have ElevenLabs credits, switch to `elevenlabs` (or `auto` for ElevenLabs with local fallback).
VOICE_PROVIDER=local

ELEVENLABS_API_KEY=
ELEVENLABS_WS_BASE_URL=wss://api.elevenlabs.io
ELEVENLABS_TTS_VOICE_ID=
ELEVENLABS_TTS_MODEL_ID=eleven_multilingual_v2
ELEVENLABS_STT_MODEL_ID=scribe_v2_realtime
# Realtime output format. For lowest latency, prefer PCM (browser plays via WebAudio).
ELEVENLABS_TTS_OUTPUT_FORMAT=pcm_16000
# STT commit strategy: manual (client sends "stop") or vad (server decides).
ELEVENLABS_STT_COMMIT_STRATEGY=manual

# Local voice (offline): whisper.cpp STT + Kokoro TTS.
LOCAL_WHISPER_CLI=whisper-cli
# STT preset profile: fast|balanced|accurate.
APP_LOCAL_STT_PROFILE=balanced
# Auto-download selected whisper model if missing.
APP_LOCAL_STT_AUTO_MODEL_DOWNLOAD=true
# Optional explicit override (if empty, preset default is used).
LOCAL_WHISPER_MODEL_PATH=.models/whisper/ggml-base.en.bin
LOCAL_WHISPER_LANGUAGE=en
# 0 => auto (recommended). Increase for faster transcription on Apple Silicon.
LOCAL_WHISPER_THREADS=0
# Optional explicit overrides (preset defaults: fast=1/1, balanced=2/2, accurate=3/3).
LOCAL_WHISPER_BEAM_SIZE=2
LOCAL_WHISPER_BEST_OF=2

# Leave empty to auto-pick from .venv/ or python3 on PATH.
LOCAL_KOKORO_PYTHON=
LOCAL_KOKORO_WORKER_SCRIPT=scripts/kokoro_worker.py
LOCAL_KOKORO_VOICE=af_sarah
LOCAL_KOKORO_LANG_CODE=a

OPENCLAW_ADAPTER_MODE=auto
# OpenClaw Gateway WS (recommended): enables streaming assistant deltas so Samantha
# can start talking sooner instead of waiting for full CLI completion.
OPENCLAW_GATEWAY_URL=ws://127.0.0.1:18789
# Must match the gateway process token. `scripts/dev` will auto-generate one if missing.
OPENCLAW_GATEWAY_TOKEN=
OPENCLAW_HTTP_URL=
# Strict validation for streamed OpenClaw HTTP chunks (useful in staging).
OPENCLAW_HTTP_STREAM_STRICT=false
# OpenClaw agent id used by `make dev` (default: samantha).
OPENCLAW_AGENT_ID=samantha
# Per-user OpenClaw workspace directory (mutable scratch: downloaded repos, web scrapes, tool outputs).
# Defaults to ~/.openclaw/workspaces/$OPENCLAW_AGENT_ID.
OPENCLAW_WORKSPACE_DIR=
OPENCLAW_CLI_PATH=openclaw
# Controls OpenClaw CLI reasoning depth: minimal|low|medium|high.
OPENCLAW_CLI_THINKING=minimal
# Feature-flag CLI incremental streaming (enabled by default).
OPENCLAW_CLI_STREAMING=true
# Minimum buffered chars before flushing a non-sentence CLI text chunk.
OPENCLAW_CLI_STREAM_MIN_CHARS=16

DATABASE_URL=
MEMORY_EMBEDDING_DIM=1536
